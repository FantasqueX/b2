steps:
- bash: |
    set -e
    uname -a
    sudo xcode-select -switch ${XCODE_APP}
    which clang++
  displayName: Install
- bash: |
    set -e
    cd src/engine
    ./build.sh ${TOOLSET} --cxx=${CXX}
    ./b2 -v
    cd ../..
  displayName: Build
- bash: |
    set -e
    CXX_PATH=`which ${CXX}`
    echo "using ${TEST_TOOLSET} : : ${CXX_PATH} ;" > ${HOME}/user-config.jam
    ./bootstrap.sh ${TOOLSET}
    ./b2 --prefix=$HOME/temp/.b2 install ${TEST_TOOLSET}
    rm ./b2
    export PATH=$HOME/temp/.b2/bin:$PATH
    cd $HOME
    touch build.jam
    b2 -v
    b2 -n --debug-configuration
  displayName: Bootstrap
- bash: set -e ; pushd example/hello ; $HOME/temp/.b2/bin/b2 -d+2 ${B2_ARGS} ; popd
  displayName: "example/hello"
- bash: set -e ; pushd example/libraries ; $HOME/temp/.b2/bin/b2 -d+2 ${B2_ARGS} ; popd
  displayName: "example/libraries"
- bash: set -e ; pushd example/make ; $HOME/temp/.b2/bin/b2 -d+2 ${B2_ARGS} ; popd
  displayName: "example/make"
